<!DOCTYPE html>
<html>
<head>
<style>
   body { font-family: Arial, sans-serif; width: 585px; }
  #map_canvas { width: 585px; height: 400px; }
.auto-style1 {
	border-width: 0px;
	font-family: "Franklin Gothic Medium", "Arial Narrow", Arial, sans-serif;
}
.auto-style2 {
	color: #0000FF;
	font-size: small;
}
</style>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

var map;

var layer_1, layer_2, layer_3, layer_4, layer_5 ;
var tableid_1 = 1170238;
var tableid_2 = 1156706;
var tableid_3 = 1171176;
var tableid_4 = 1171298;
var tableid_5 = 1171364;
var center = new google.maps.LatLng(43.24895389686911, -79.86236572265625);
var zoom = 10;
var geocoder = new google.maps.Geocoder();

function initialize() { 
  map = new google.maps.Map(document.getElementById('map_canvas'), { 
    center: center, 
    zoom: zoom, 
    mapTypeId: google.maps.MapTypeId.ROADMAP 
  });     
  var style = [    
  	{ 
  		featureType: 'all',
  		elementType: 'all',      
  		stylers: [
  			{ saturation: -57 }
  		]
  	}  
  ];
  
  var styledMapType = new google.maps.StyledMapType(style, {
	map: map,
	name: 'Styled Map'
  });
  
  map.mapTypes.set('map-style', styledMapType);
  map.setMapTypeId('map-style');

  info_window = new google.maps.InfoWindow(); 

  layer_1 = new google.maps.FusionTablesLayer({ 
    query: { 
      select: 'Lat', 
      from: tableid_1 
    }, 
    map: map, 
    suppressInfoWindows: true 
    }); 
  google.maps.event.addListener(layer_1, 'click', windowControl); 

  layer_2 = new google.maps.FusionTablesLayer({ 
    query: { 
      select: 'Lat', 
      from: tableid_2 
    }, 
    map: map, 
    suppressInfoWindows: true 
  }); 
  google.maps.event.addListener(layer_2, 'click', windowControl); 

  layer_3 = new google.maps.FusionTablesLayer({ 
    query: { 
      select: 'Lat', 
      from: tableid_3 
    }, 
    map: map, 
    suppressInfoWindows: true 
  }); 
  google.maps.event.addListener(layer_3, 'click', windowControl); 


  layer_4 = new google.maps.FusionTablesLayer({ 
    query: { 
      select: 'Lat', 
      from: tableid_4 
    }, 
    map: map, 
    suppressInfoWindows: true 
  }); 
  google.maps.event.addListener(layer_4, 'click', windowControl); 


  layer_5 = new google.maps.FusionTablesLayer({ 
    query: { 
      select: 'Lat', 
      from: tableid_5 
    }, 
    map: map, 
    suppressInfoWindows: true 
  }); 
  google.maps.event.addListener(layer_5, 'click', windowControl); 

// Create the legend and display on the map
  var legendDiv = document.createElement('DIV');
  var legend = new Legend(legendDiv, map);
  legendDiv.index = 1;
  map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legendDiv);


}

function windowControl(event) { 
  info_window.setOptions({ 
    content: event.infoWindowHtml, 
    position: event.latLng, 
    pixelOffset: event.pixelOffset 
  }); 
  info_window.open(map); 
} 

function zoomtoaddress() {

  // Use the geocoder to geocode the address
  geocoder.geocode( { 'address': document.getElementById("address").value }, function(results, status) {
    // If the status of the geocode is OK
    if (status == google.maps.GeocoderStatus.OK) {
      // Change the center and zoom of the map
      map.setCenter(results[0].geometry.location);
      map.setZoom(14);
            
    } 
  });
}

// Reset the zoom, center, and FusionTablesLayer query
function reset() {
  map.setCenter(center);
  map.setZoom(zoom);
  layer.setQuery("SELECT lat FROM " + tableid);
}

// Register Enter key press to submit form
window.onkeypress = enterSubmit;
function enterSubmit(event) {
  if(event.keyCode==13) {
    zoomtoaddress();
  }
}

function Legend(controlDiv, map) {
  // Set CSS styles for the DIV containing the control
  // Setting padding to 5 px will offset the control
  // from the edge of the map
  controlDiv.style.padding = '5px';

  // Set CSS for the control border
  var controlUI = document.createElement('DIV');
  controlUI.style.backgroundColor = 'white';
  controlUI.style.borderStyle = 'solid';
  controlUI.style.borderWidth = '1px';
  controlUI.title = 'Legend';
  controlDiv.appendChild(controlUI);

  // Set CSS for the control text
  var controlText = document.createElement('DIV');
  controlText.style.fontFamily = 'Arial,sans-serif';
  controlText.style.fontSize = '12px';
  controlText.style.paddingLeft = '4px';
  controlText.style.paddingRight = '4px';
  
  // Add the text
  controlText.innerHTML = '<b>Hamilton Water Spots</b><br />' +
  	'<img src="http://www.joeycoleman.ca/OH_files/WaterFun/sm_red.jpg" /> Beaches<br />' +
  	'<img src="http://www.joeycoleman.ca/OH_files/WaterFun/sm_purple.jpg" /> Outdoor Pools /<br />&nbsp &nbsp &nbsp &nbsp &nbspWaterpark<br />' +
  	'<img src="http://www.joeycoleman.ca/OH_files/WaterFun/sm_yellow.jpg" /> Indoor Pools<br />' +
  	'<img src="http://www.joeycoleman.ca/OH_files/WaterFun/sm_blue.jpg" /> Splash/<br />&nbsp &nbsp &nbsp &nbsp &nbspSpray Pads<br />' +
  	'<img src="http://www.joeycoleman.ca/OH_files/WaterFun/sm_green.jpg" /> Wading Pools<br />' +
  	'<small></small>';
  controlUI.appendChild(controlText);
}



</script>

</head>
<body onload="initialize();">
<div id="map_canvas"></div>
Find your nearest water spots, enter an address: <br />
<input type="text" id="address" style="width: 250px" /><input type="button" onclick="zoomtoaddress()" value="Search!" /><input type="button" onclick="reset()" value="Reset" /><br />
<p class="auto-style2"><strong>
<a href="http://www.openhamilton.ca">
<img alt="" height="58" src="http://www.openhamilton.ca/logos/openhamilton.png" width="300" class="auto-style1" style="float: right"></a>Dowsing<br>
Hamilton's Swimming App<br>Licensed under the terms of the
<a class="external text" href="http://www.opendatacommons.org/licenses/odbl/" rel="nofollow">
Open Database License 1.0</a>, &quot;ODbL&quot;</strong></p>

</body>
</html>